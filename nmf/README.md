# Rerunning NMF

**Note that NMF is NOT rerun by default.**  Instead, this repository comes with the NMF outputs that were originally generated (stored in `nmf/adni/results/mat` and `nmf/oasis3/results/mat`).  This ensures that all analyses are run using the same components as I had.

To rerun the NMF for a dataset, the MATLAB script `nmf/adni/run_nmf.m` can be used (and the equivalent for OASIS3).  This will **regenerate and overwrite** the outputs in `nmf/adni/results/mat`.  On my laptop, this takes only a couple minutes.

The intra-sample reproducibility analysis for ADNI is also not rerun by default.  The data required for creating this plot are stored in `nmf/adni/results/repeat_reproducibility_mat/reproducibilityResults.mat`.  This file can be regenerated by using `run_repeated_reproducibility.m` and subsequently `evaluate_repeated_reproducibility.m`.  **On my laptop, the first script takes a few hours to run.** 

### Citation

This folder contains NMF code from here: https://github.com/asotiras/brainparts.  

Sotiras, Aristeidis, Susan M. Resnick, and Christos Davatzikos. **[Finding imaging patterns of structural covariance via non-negative matrix factorization.](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4357179/)** *NeuroImage* 108 (2015): 1-16.
